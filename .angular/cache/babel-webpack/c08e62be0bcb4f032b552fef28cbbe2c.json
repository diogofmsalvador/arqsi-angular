{"ast":null,"code":"import { IntroductionMessageDialogComponent } from \"../../introduction-message-dialog/introduction-message-dialog.component\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"@angular/material/snack-bar\";\nimport * as i3 from \"../../../Services/MissionService\";\nimport * as i4 from \"../../../log-in-component/Service/logInService\";\nimport * as i5 from \"../../../Services/IntroductionService\";\nimport * as i6 from \"@angular/material/expansion\";\nimport * as i7 from \"@angular/material/icon\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"@angular/material/radio\";\nimport * as i10 from \"@angular/forms\";\nimport * as i11 from \"@angular/material/divider\";\nimport * as i12 from \"@angular/material/button\";\n\nfunction ObjectiveUserTabComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 7);\n    i0.ÉµÉµelement(1, \"div\", 8);\n    i0.ÉµÉµelementEnd();\n  }\n}\n\nfunction ObjectiveUserTabComponent_div_10_mat_radio_group_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ÉµÉµgetCurrentView();\n\n    i0.ÉµÉµelementStart(0, \"mat-radio-group\", 11);\n    i0.ÉµÉµlistener(\"ngModelChange\", function ObjectiveUserTabComponent_div_10_mat_radio_group_3_Template_mat_radio_group_ngModelChange_0_listener($event) {\n      i0.ÉµÉµrestoreView(_r6);\n      const ctx_r5 = i0.ÉµÉµnextContext(2);\n      return ctx_r5.selectedValue = $event;\n    });\n    i0.ÉµÉµelement(1, \"mat-divider\");\n    i0.ÉµÉµelementStart(2, \"div\", 12);\n    i0.ÉµÉµelementStart(3, \"mat-radio-button\", 13);\n    i0.ÉµÉµlistener(\"click\", function ObjectiveUserTabComponent_div_10_mat_radio_group_3_Template_mat_radio_button_click_3_listener() {\n      i0.ÉµÉµrestoreView(_r6);\n      const ctx_r7 = i0.ÉµÉµnextContext(2);\n      return ctx_r7.setUserSelected();\n    });\n    i0.ÉµÉµtext(4);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementEnd();\n  }\n\n  if (rf & 2) {\n    const user_r4 = ctx.$implicit;\n    const ctx_r2 = i0.ÉµÉµnextContext(2);\n    i0.ÉµÉµproperty(\"ngModel\", ctx_r2.selectedValue);\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµpropertyInterpolate(\"value\", user_r4.username);\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµtextInterpolate1(\"Utilizador: \", user_r4.nome, \"\");\n  }\n}\n\nfunction ObjectiveUserTabComponent_div_10_mat_action_row_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ÉµÉµgetCurrentView();\n\n    i0.ÉµÉµelementStart(0, \"mat-action-row\");\n    i0.ÉµÉµelementStart(1, \"button\", 14);\n    i0.ÉµÉµlistener(\"click\", function ObjectiveUserTabComponent_div_10_mat_action_row_4_Template_button_click_1_listener() {\n      i0.ÉµÉµrestoreView(_r9);\n      const ctx_r8 = i0.ÉµÉµnextContext(2);\n      return ctx_r8.openDialog();\n    });\n    i0.ÉµÉµtext(2, \"Submeter\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementEnd();\n  }\n}\n\nfunction ObjectiveUserTabComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\");\n    i0.ÉµÉµelementStart(1, \"h2\", 9);\n    i0.ÉµÉµtext(2, \"Selecione o utilizador que pretende conhecer: \");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµtemplate(3, ObjectiveUserTabComponent_div_10_mat_radio_group_3_Template, 5, 3, \"mat-radio-group\", 10);\n    i0.ÉµÉµtemplate(4, ObjectiveUserTabComponent_div_10_mat_action_row_4_Template, 3, 0, \"mat-action-row\", 6);\n    i0.ÉµÉµelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµproperty(\"ngForOf\", ctx_r1.suggestedUsersFilled);\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r1.isUserSelected);\n  }\n}\n\nexport let ObjectiveUserTabComponent = /*#__PURE__*/(() => {\n  class ObjectiveUserTabComponent {\n    constructor(dialog, _snackBar, _mission, _user, _introduction) {\n      this.dialog = dialog;\n      this._snackBar = _snackBar;\n      this._mission = _mission;\n      this._user = _user;\n      this._introduction = _introduction;\n      this.horizontalPosition = 'center';\n      this.verticalPosition = 'top';\n      this.durationInSeconds = 5;\n      this.isDoneProcessing = false;\n      this.isUserSelected = false;\n      this.panelOpenState = false;\n      this.loggedInUserId = \"\";\n      this.suggestedUsers = [];\n      this.suggestedUsersFilled = [];\n    }\n\n    ngOnInit() {}\n\n    processingMethod() {\n      this.suggestedUsers = [];\n      this.suggestedUsersFilled = []; // @ts-ignore\n\n      this._user.getUserByUsername(localStorage.getItem('username')).subscribe(response => {\n        var _a, _b;\n\n        this.userData = response.body; // @ts-ignore\n\n        this.loggedInUserId = (_a = response.body) === null || _a === void 0 ? void 0 : _a.id_User;\n        console.log(this.userData);\n\n        this._mission.getSuggestedUsers(\"2\", (_b = this.userData) === null || _b === void 0 ? void 0 : _b.id_User).subscribe(response => {\n          var _a; // @ts-ignore\n\n\n          this.suggestedUsers = (_a = response.body) === null || _a === void 0 ? void 0 : _a._users;\n\n          this._introduction.GetPendingOrAwaitingIntroductionRequests(this.loggedInUserId, true).subscribe(result => {\n            var _a; // @ts-ignore\n\n\n            for (let i = 0; i < ((_a = result.body) === null || _a === void 0 ? void 0 : _a.length); i++) {\n              // @ts-ignore\n              for (let j = 0; j < this.suggestedUsers.length; j++) {\n                // @ts-ignore\n                if (this.suggestedUsers[j] == result.body[i].introduction_Request_From_User.value) {\n                  this.suggestedUsers.splice(j, 1);\n                } else {\n                  // @ts-ignore\n                  if (this.suggestedUsers[j] == result.body[i].introduction_Request_To_User.value) {\n                    this.suggestedUsers.splice(j, 1);\n                  }\n                }\n              }\n            }\n\n            console.log(this.suggestedUsers); // @ts-ignore\n\n            for (let i = 0; i < this.suggestedUsers.length; i++) {\n              // @ts-ignore\n              this._user.getUserById(this.suggestedUsers[i]).subscribe(response => {\n                if (response.body) {\n                  this.suggestedUsersFilled.push(response.body);\n                }\n              });\n            }\n\n            setTimeout(() => {\n              this.isDoneProcessing = !this.isDoneProcessing;\n            }, 1000);\n          });\n        });\n      }); //this._mission.getSuggestedUsers(\"2\", localStorage.getItem('username')).subscribe();\n      //Request users\n\n    }\n\n    setUserSelected() {\n      this.isUserSelected = true;\n    }\n\n    openDialog() {\n      const dialogRef = this.dialog.open(IntroductionMessageDialogComponent, {\n        width: '400px' // data: {name: this.name, animal: this.animal},\n\n      });\n      dialogRef.afterClosed().subscribe(result => {\n        if (result != null || result != undefined) {\n          // @ts-ignore\n          this._user.getUserByUsername(this.selectedValue).subscribe(response => {\n            var _a; // @ts-ignore\n\n\n            this._introduction.addIntroductionBeginner(result, this.loggedInUserId, (_a = response.body) === null || _a === void 0 ? void 0 : _a.id_User).subscribe(result => {\n              console.log(result);\n            });\n          }); // @ts-ignore\n\n\n          this.openSnackBar();\n          ;\n        }\n\n        console.log(result); //this.animal = result;\n      });\n    }\n\n    openSnackBar() {\n      this._snackBar.open('IntroduÃ§Ã£o a utilizador solicitada com sucesso. ðŸ¤ª', 'Fechar', {\n        duration: this.durationInSeconds * 1000,\n        horizontalPosition: this.horizontalPosition,\n        verticalPosition: this.verticalPosition\n      });\n\n      this.panelOpenState = false; // @ts-ignore\n\n      this.selectedValue = null;\n      this.isDoneProcessing = !this.isDoneProcessing;\n    }\n\n  }\n\n  ObjectiveUserTabComponent.Éµfac = function ObjectiveUserTabComponent_Factory(t) {\n    return new (t || ObjectiveUserTabComponent)(i0.ÉµÉµdirectiveInject(i1.MatDialog), i0.ÉµÉµdirectiveInject(i2.MatSnackBar), i0.ÉµÉµdirectiveInject(i3.MissionService), i0.ÉµÉµdirectiveInject(i4.logInService), i0.ÉµÉµdirectiveInject(i5.IntroductionService));\n  };\n\n  ObjectiveUserTabComponent.Éµcmp = /*@__PURE__*/i0.ÉµÉµdefineComponent({\n    type: ObjectiveUserTabComponent,\n    selectors: [[\"app-objective-user-tab\"]],\n    decls: 11,\n    vars: 3,\n    consts: [[1, \"example-headers-align\"], [\"hideToggle\", \"\", 3, \"expanded\", \"expandedChange\"], [3, \"click\"], [2, \"transform\", \"translateY(2px)\"], [2, \"transform\", \"translateX(10px)\"], [\"class\", \"row justify-content-center\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"row\", \"justify-content-center\"], [1, \"lds-dual-ring\", 2, \"transform\", \"translateX(-15px)\"], [2, \"margin-left\", \"10px\"], [3, \"ngModel\", \"ngModelChange\", 4, \"ngFor\", \"ngForOf\"], [3, \"ngModel\", \"ngModelChange\"], [1, \"row\", \"p-2\"], [1, \"example-margin\", 3, \"value\", \"click\"], [\"mat-button\", \"\", \"color\", \"primary\", 3, \"click\"]],\n    template: function ObjectiveUserTabComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ÉµÉµelementStart(0, \"mat-accordion\", 0);\n        i0.ÉµÉµelementStart(1, \"mat-expansion-panel\", 1);\n        i0.ÉµÉµlistener(\"expandedChange\", function ObjectiveUserTabComponent_Template_mat_expansion_panel_expandedChange_1_listener($event) {\n          return ctx.panelOpenState = $event;\n        });\n        i0.ÉµÉµelementStart(2, \"mat-expansion-panel-header\", 2);\n        i0.ÉµÉµlistener(\"click\", function ObjectiveUserTabComponent_Template_mat_expansion_panel_header_click_2_listener() {\n          return ctx.processingMethod();\n        });\n        i0.ÉµÉµelementStart(3, \"mat-panel-title\", 3);\n        i0.ÉµÉµtext(4, \" Desafio \");\n        i0.ÉµÉµelementEnd();\n        i0.ÉµÉµelementStart(5, \"mat-panel-description\");\n        i0.ÉµÉµtext(6, \" Utilizadores objetivo \");\n        i0.ÉµÉµelementStart(7, \"mat-icon\", 4);\n        i0.ÉµÉµtext(8, \"map\");\n        i0.ÉµÉµelementEnd();\n        i0.ÉµÉµelementEnd();\n        i0.ÉµÉµelementEnd();\n        i0.ÉµÉµtemplate(9, ObjectiveUserTabComponent_div_9_Template, 2, 0, \"div\", 5);\n        i0.ÉµÉµtemplate(10, ObjectiveUserTabComponent_div_10_Template, 5, 2, \"div\", 6);\n        i0.ÉµÉµelementEnd();\n        i0.ÉµÉµelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ÉµÉµadvance(1);\n        i0.ÉµÉµproperty(\"expanded\", ctx.panelOpenState);\n        i0.ÉµÉµadvance(8);\n        i0.ÉµÉµproperty(\"ngIf\", !ctx.isDoneProcessing);\n        i0.ÉµÉµadvance(1);\n        i0.ÉµÉµproperty(\"ngIf\", ctx.isDoneProcessing);\n      }\n    },\n    directives: [i6.MatAccordion, i6.MatExpansionPanel, i6.MatExpansionPanelHeader, i6.MatExpansionPanelTitle, i6.MatExpansionPanelDescription, i7.MatIcon, i8.NgIf, i8.NgForOf, i9.MatRadioGroup, i10.NgControlStatus, i10.NgModel, i11.MatDivider, i9.MatRadioButton, i6.MatExpansionPanelActionRow, i12.MatButton],\n    styles: [\"\"]\n  });\n  return ObjectiveUserTabComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}